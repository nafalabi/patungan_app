// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.977
package pages

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

// LoginProps contains props for the login page
type LoginProps struct {
	FirebaseAPIKey     string
	FirebaseAuthDomain string
	FirebaseProjectID  string
}

// Login renders the login page (standalone, no base layout)
func Login(props LoginProps) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<!doctype html><html lang=\"en\"><head><meta charset=\"UTF-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><title>Login - Patungan App</title><link rel=\"stylesheet\" href=\"/static/css/tailwind.css\"><link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap\" rel=\"stylesheet\"></head><body class=\"bg-bg-body flex items-center justify-center min-h-screen font-sans\"><div class=\"bg-bg-card rounded-2xl p-12 w-full max-w-[420px] shadow-lg border border-border text-center animate-fadeIn\"><div class=\"text-4xl mb-2\">ðŸ’¸</div><h1 class=\"text-3xl font-bold mb-2 text-text-primary\">Patungan App</h1><p class=\"text-text-secondary mb-8 text-base\">Sign in to manage your shared expenses</p><button id=\"login-btn\" class=\"flex items-center justify-center gap-3 w-full py-3.5 px-6 bg-white text-gray-800 border-none rounded-xl text-base font-semibold cursor-pointer transition-all shadow-sm hover:-translate-y-0.5 hover:shadow-md disabled:opacity-70 disabled:cursor-not-allowed\"><svg viewBox=\"0 0 24 24\" class=\"w-5 h-5\"><path fill=\"#4285F4\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"></path> <path fill=\"#34A853\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"></path> <path fill=\"#FBBC05\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"></path> <path fill=\"#EA4335\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"></path></svg> <span>Sign in with Google</span><div class=\"hidden w-5 h-5 border-2 border-gray-200 border-t-primary rounded-full animate-spin\" id=\"spinner\"></div></button><div class=\"hidden bg-red-500/10 border border-red-500/30 text-red-300 p-3 rounded-lg mt-5 text-sm\" id=\"error-message\"></div><div class=\"mt-8 text-text-secondary text-sm\"><p>Powered by Firebase Authentication</p></div></div><script id=\"firebase-config\" data-apikey=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var2 string
		templ_7745c5c3_Var2, templ_7745c5c3_Err = templ.JoinStringErrs(props.FirebaseAPIKey)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `web/templates/pages/login.templ`, Line: 44, Col: 65}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var2))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "\" data-authdomain=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var3 string
		templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinStringErrs(props.FirebaseAuthDomain)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `web/templates/pages/login.templ`, Line: 44, Col: 110}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "\" data-projectid=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var4 string
		templ_7745c5c3_Var4, templ_7745c5c3_Err = templ.JoinStringErrs(props.FirebaseProjectID)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `web/templates/pages/login.templ`, Line: 44, Col: 153}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var4))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "\"></script>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = LoginScript().Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "</body></html>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

// LoginScript handles Firebase authentication
func LoginScript() templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var5 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var5 == nil {
			templ_7745c5c3_Var5 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, "<script type=\"module\">\n\t\timport { initializeApp } from \"https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js\";\n\t\timport { getAuth, GoogleAuthProvider, signInWithPopup } from \"https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js\";\n\n\t\tconst configEl = document.getElementById('firebase-config');\n\t\tconst firebaseConfig = {\n\t\t\tapiKey: configEl.dataset.apikey,\n\t\t\tauthDomain: configEl.dataset.authdomain,\n\t\t\tprojectId: configEl.dataset.projectid\n\t\t};\n\n\t\tconst app = initializeApp(firebaseConfig);\n\t\tconst auth = getAuth(app);\n\t\tconst provider = new GoogleAuthProvider();\n\n\t\tconst loginBtn = document.getElementById('login-btn');\n\t\tconst spinner = document.getElementById('spinner');\n\t\tconst errorMessage = document.getElementById('error-message');\n\n\t\tfunction showError(message) {\n\t\t\terrorMessage.textContent = message;\n\t\t\terrorMessage.style.display = 'block';\n\t\t}\n\n\t\tfunction hideError() {\n\t\t\terrorMessage.style.display = 'none';\n\t\t}\n\n\t\tfunction setLoading(loading) {\n\t\t\tif (loading) {\n\t\t\t\tloginBtn.disabled = true;\n\t\t\t\tspinner.style.display = 'block';\n\t\t\t\tloginBtn.querySelector('span').textContent = 'Signing in...';\n\t\t\t} else {\n\t\t\t\tloginBtn.disabled = false;\n\t\t\t\tspinner.style.display = 'none';\n\t\t\t\tloginBtn.querySelector('span').textContent = 'Sign in with Google';\n\t\t\t}\n\t\t}\n\n\t\tloginBtn.addEventListener('click', async () => {\n\t\t\thideError();\n\t\t\tsetLoading(true);\n\n\t\t\ttry {\n\t\t\t\tconst result = await signInWithPopup(auth, provider);\n\t\t\t\tconst idToken = await result.user.getIdToken();\n\n\t\t\t\tconst response = await fetch('/auth/login', {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Authorization': `Bearer ${idToken}`,\n\t\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (response.ok) {\n\t\t\t\t\twindow.location.href = '/';\n\t\t\t\t} else {\n\t\t\t\t\t// Sign out from Firebase if backend rejects session\n\t\t\t\t\tawait auth.signOut();\n\t\t\t\t\tconst data = await response.json();\n\t\t\t\t\tshowError(data.error || 'Login failed. Please try again.');\n\t\t\t\t\tsetLoading(false);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Login failed:', error);\n\t\t\t\tif (error.code === 'auth/popup-closed-by-user') {\n\t\t\t\t\tshowError('Sign-in was cancelled.');\n\t\t\t\t} else if (error.code === 'auth/popup-blocked') {\n\t\t\t\t\tshowError('Pop-up was blocked. Please allow pop-ups for this site.');\n\t\t\t\t} else {\n\t\t\t\t// Show detailed error for debugging\n\t\t\t\tshowError(`Login failed: ${error.message} (${error.code})`);\n\t\t\t}\n\t\t\tsetLoading(false);\n\t\t}\n\t\t});\n\n\t\tconst urlParams = new URLSearchParams(window.location.search);\n\t\tif (urlParams.has('error')) {\n\t\t\tshowError('Authentication configuration error. Please contact support.');\n\t\t}\n\t</script>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
